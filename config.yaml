# Home Assistant Freezing Prediction Model Configuration

# Project Settings
project:
  name: "HA Freezing Model"
  version: "2.0.0"
  description: "Predict freezing conditions using Home Assistant sensor data"

# Data Sources
data_sources:
  internal:
    csv_path_temp:  "Data/internal_source/Internal_temp_original.csv"
    csv_path_humid: "Data/internal_source/Internal_humidity_original.csv"

  home_assistant:
    base_url: "http://192.168.1.57:8123"
    token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiIwODBkNWJlYjZlYjM0YTQ3YmE5MjNjM2Y3ODkxM2M1NSIsImlhdCI6MTc2MTY4MzM1MSwiZXhwIjoyMDc3MDQzMzUxfQ.9OgMhVwwnUOmn4IORgFyEaPtugm2yBo1mqmCwKddDkY"
    sensors:
      temperature: 
        id: "sensor.0x00124b00292c383c_temperature"
        data_col: "temp_int"
      humidity: 
        id: "sensor.0x00124b00292c383c_humidity"
        data_col: "humid_int"
      boiler: 
        id: "switch.0xa4c138422177f81b"
        data_col: "boiler_state"
      freezing: 
        id: "input_boolean.freezing"
        data_col: "freezing_on"
  
  openmeteo:
    base_url: "https://api.open-meteo.com"
    archive_url: "https://archive-api.open-meteo.com"
    coordinates:
      latitude: 50.79279599354295
      longitude: 4.328090739897015
      timezone: "Europe/Brussels"

# Data Processing
data_processing:
  # Date range settings
  default_end_date: "today"  # or specific date like "2025-10-27"
  lookback_days: 365  # How many days to look back from end date
  
  # Moving average windows
  moving_averages:
    windows: [3, 5, 7]
  
  # Data resampling
  resample_frequency: "1H"  # Hourly resampling
  gap_fill_limit: 2  # Forward fill up to 2 hours
  
  # Features to exclude (based on feature importance analysis)
  excluded_features:
    - "wind_speed"
    - "wind_bearing"
    - "precipitation"

# Model Settings
model:
  # Target variable
  target_column: "freezing_on_tomorrow"
  
  # Test split
  test_size: 0.2
  random_state: 42
  
  # Cross-validation
  cv_folds: 5
  cv_scoring: "f1"
  
  # Models to try
  models:
    - "logreg"
    - "svm_rbf"
    - "rf"
    - "gb"
    - "xgb"
  
  # Model parameters
  model_params:
    rf:
      n_estimators: 400
    gb:
      n_estimators: 400
    xgb:
      n_estimators: 400
      learning_rate: 0.05
      max_depth: 5
      subsample: 0.9
      colsample_bytree: 0.9

# Paths
paths:
  data_dir: "Data"
  output_dir: "Data/Output"
  model_dir: "Data/Output/model"
  history_dir: "Data/internal_source/history"

# Logging
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "logs/ha_freezing_model.log"

# Freezing Rules
freezing_rules:
  # Define when freezing is expected
  winter_period:
    start_month: 11
    start_day: 1
    end_month: 4
    end_day: 2
  special_dates:
    - "2025-10-27"  # Specific date when freezing is expected
